module "tableau_server" {
  source                      = "git::ssh://git@github.com/osodevops/aws-terraform-module-tableau.git//modules/tableau-cluster"
  account_alias               = var.account_alias
  alb_allowed_ips             = var.alb_allowed_ips
  alb_certificate_arn         = var.alb_certificate_arn
  alb_deletion_protection     = var.alb_deletion_protection
  alb_internal                = var.alb_internal
  asg_force_delete            = var.asg_force_delete
  alb_tags                    = var.alb_tags
  ami_name                    = var.ami_name
  aws_region                  = var.aws_region
  common_tags                 = var.common_tags
  cluster_definition          = jsondecode(file("${path.module}/cluster_definition.json"))
  cluster_max_zookeeper_size      = var.cluster_max_zookeeper_size
  create_lambdas              = var.create_lambdas
  deployment                  = var.deployment
  dns_zone                    = var.dns_zone
  dns_name                    = var.deployment
  lambda_enable_automation              = var.lambda_enable_automation
  environment                 = var.environment
  force_destroy               = var.force_destroy
  frontend_domain             = var.frontend_domain
  instance_allowed_ips        = var.instance_allowed_ips
  is_private_zone             = var.is_private_zone
  lambda_execution_schedule   = var.lambda_execution_schedule
  lambda_manage_zookeeper            = var.lambda_manage_zookeeper
  lambda_manage_new_nodes            = var.lambda_manage_new_nodes
  lambda_manage_terminations         = var.lambda_manage_terminations
  lambda_manage_replicas             = var.lambda_manage_replicas
  rds_allocated_storage       = var.rds_allocated_storage
  rds_backup_retention_period = var.rds_backup_retention_period
  rds_backup_window           = var.rds_backup_window
  rds_create_database       = var.rds_create_database
  rds_create_monitoring_role  = var.rds_create_monitoring_role
  rds_deletion_protection     = var.rds_deletion_protection
  rds_db_name                 = var.rds_db_name
  rds_instance_class          = var.rds_instance_class
  rds_maintenance_window      = var.rds_maintenance_window
  rds_max_allocated_storage   = var.rds_max_allocated_storage
  rds_monitoring_role_name    = var.rds_monitoring_role_name
  rds_multi_az                = var.rds_multi_az
  rds_performance_insights_enabled          = var.rds_performance_insights_enabled
  rds_performance_insights_retention_period = var.rds_performance_insights_retention_period
  rds_skip_final_snapshot     = var.rds_skip_final_snapshot
  rds_storage_encrypted       = var.rds_storage_encrypted
  sf_build_enable_automation  = var.sf_build_enable_automation
  sf_build_timer_schedule     = var.sf_build_timer_schedule
  sf_recovery_enable_automation = var.sf_recovery_enable_automation
  sf_recovery_timer_schedule = var.sf_recovery_timer_schedule
  ssh_key_name                = var.ssh_key_name
  vpc_name                    = var.vpc_name
}